/*!
* lex-web-ui v"0.11.0"
* (c) 2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.
* Released under the Amazon Software License.
*/   
!(function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("vue"),require("vuex"),require("aws-sdk/global"),require("aws-sdk/clients/lexruntime"),require("aws-sdk/clients/polly")):"function"==typeof define&&define.amd?define(["vue","vuex","aws-sdk/global","aws-sdk/clients/lexruntime","aws-sdk/clients/polly"],e):"object"==typeof exports?exports.LexWebUi=e(require("vue"),require("vuex"),require("aws-sdk/global"),require("aws-sdk/clients/lexruntime"),require("aws-sdk/clients/polly")):t.LexWebUi=e(t.vue,t.vuex,t["aws-sdk/global"],t["aws-sdk/clients/lexruntime"],t["aws-sdk/clients/polly"])})(this,(function(t,e,n,i,r){return (function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=65)})([(function(t,e){var n=t.exports={version:"2.5.1"};"number"==typeof __e&&(__e=n)}),(function(t,e,n){var i=n(34)("wks"),r=n(22),o=n(2).Symbol,s="function"==typeof o;(t.exports=function(t){return i[t]||(i[t]=s&&o[t]||(s?o:r)("Symbol."+t))}).store=i}),(function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)}),(function(t,e,n){var i=n(2),r=n(0),o=n(16),s=n(8),a=function(t,e,n){var u,c,l,d=t&a.F,f=t&a.G,p=t&a.S,h=t&a.P,v=t&a.B,m=t&a.W,g=f?r:r[e]||(r[e]={}),b=g.prototype,y=f?i:p?i[e]:(i[e]||{}).prototype;f&&(n=e);for(u in n)(c=!d&&y&&void 0!==y[u])&&u in g||(l=c?y[u]:n[u],g[u]=f&&"function"!=typeof y[u]?n[u]:v&&c?o(l,i):m&&y[u]==l?(function(t){var e=function(e,n,i){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,i)}return t.apply(this,arguments)};return e.prototype=t.prototype,e})(l):h&&"function"==typeof l?o(Function.call,l):l,h&&((g.virtual||(g.virtual={}))[u]=l,t&a.R&&b&&!b[u]&&s(b,u,l)))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,t.exports=a}),(function(t,e,n){var i=n(5),r=n(46),o=n(29),s=Object.defineProperty;e.f=n(6)?Object.defineProperty:function(t,e,n){if(i(t),e=o(e,!0),i(n),r)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}}),(function(t,e,n){var i=n(10);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}}),(function(t,e,n){t.exports=!n(11)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))}),(function(t,e){t.exports=function(t,e,n,i,r,o){var s,a=t=t||{},u=typeof t.default;"object"!==u&&"function"!==u||(s=t,a=t.default);var c="function"==typeof a?a.options:a;e&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0),n&&(c.functional=!0),r&&(c._scopeId=r);var l;if(o?(l=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},c._ssrRegister=l):i&&(l=i),l){var d=c.functional,f=d?c.render:c.beforeCreate;d?(c._injectStyles=l,c.render=function(t,e){return l.call(e),f(t,e)}):c.beforeCreate=f?[].concat(f,l):[l]}return{esModule:s,exports:a,options:c}}}),(function(t,e,n){var i=n(4),r=n(17);t.exports=n(6)?function(t,e,n){return i.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}}),(function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}}),(function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}}),(function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}}),(function(t,e,n){var i=n(48),r=n(30);t.exports=function(t){return i(r(t))}}),(function(t,e,n){t.exports={default:n(73),__esModule:!0}}),(function(t,e){t.exports={}}),(function(t,e,n){"use strict";e.__esModule=!0;var i=n(45),r=(function(t){return t&&t.__esModule?t:{default:t}})(i);e.default=r.default||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}}),(function(t,e,n){var i=n(21);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}}),(function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}}),(function(t,e,n){var i=n(47),r=n(35);t.exports=Object.keys||function(t){return i(t,r)}}),(function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}}),(function(t,e,n){"use strict";var i=n(74)(!0);n(50)(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this._i+=t.length,{value:t,done:!1})}))}),(function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}}),(function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}}),(function(t,e){e.f={}.propertyIsEnumerable}),(function(t,e,n){var i=n(30);t.exports=function(t){return Object(i(t))}}),(function(t,e){t.exports=!0}),(function(t,e,n){var i=n(4).f,r=n(9),o=n(1)("toStringTag");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,o)&&i(t,o,{configurable:!0,value:e})}}),(function(t,e,n){n(78);for(var i=n(2),r=n(8),o=n(14),s=n(1)("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<a.length;u++){var c=a[u],l=i[c],d=l&&l.prototype;d&&!d[s]&&r(d,s,c),o[c]=o.Array}}),(function(t,e,n){var i=n(10),r=n(2).document,o=i(r)&&i(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}}),(function(t,e,n){var i=n(10);t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}}),(function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}}),(function(t,e,n){var i=n(32),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}}),(function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}}),(function(t,e,n){var i=n(34)("keys"),r=n(22);t.exports=function(t){return i[t]||(i[t]=r(t))}}),(function(t,e,n){var i=n(2),r=i["__core-js_shared__"]||(i["__core-js_shared__"]={});t.exports=function(t){return r[t]||(r[t]={})}}),(function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")}),(function(t,e){e.f=Object.getOwnPropertySymbols}),(function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}}),(function(t,e,n){t.exports={default:n(71),__esModule:!0}}),(function(t,e,n){var i=n(19),r=n(1)("toStringTag"),o="Arguments"==i(function(){return arguments}()),s=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=s(e=Object(t),r))?n:o?i(e):"Object"==(a=i(e))&&"function"==typeof e.callee?"Arguments":a}}),(function(t,e,n){var i=n(39),r=n(1)("iterator"),o=n(14);t.exports=n(0).getIteratorMethod=function(t){if(void 0!=t)return t[r]||t["@@iterator"]||o[i(t)]}}),(function(t,e,n){"use strict";function i(t){var e,n;this.promise=new t(function(t,i){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=i}),this.resolve=r(e),this.reject=r(n)}var r=n(21);t.exports.f=function(t){return new i(t)}}),(function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(104),o=i(r),s=n(106),a=i(s),u="function"==typeof a.default&&"symbol"==typeof o.default?function(t){return typeof t}:function(t){return t&&"function"==typeof a.default&&t.constructor===a.default&&t!==a.default.prototype?"symbol":typeof t};e.default="function"==typeof a.default&&"symbol"===u(o.default)?function(t){return void 0===t?"undefined":u(t)}:function(t){return t&&"function"==typeof a.default&&t.constructor===a.default&&t!==a.default.prototype?"symbol":void 0===t?"undefined":u(t)}}),(function(t,e,n){e.f=n(1)}),(function(t,e,n){var i=n(2),r=n(0),o=n(25),s=n(43),a=n(4).f;t.exports=function(t){var e=r.Symbol||(r.Symbol=o?{}:i.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:s.f(t)})}}),(function(t,e,n){t.exports={default:n(66),__esModule:!0}}),(function(t,e,n){t.exports=!n(6)&&!n(11)((function(){return 7!=Object.defineProperty(n(28)("div"),"a",{get:function(){return 7}}).a}))}),(function(t,e,n){var i=n(9),r=n(12),o=n(69)(!1),s=n(33)("IE_PROTO");t.exports=function(t,e){var n,a=r(t),u=0,c=[];for(n in a)n!=s&&i(a,n)&&c.push(n);for(;e.length>u;)i(a,n=e[u++])&&(~o(c,n)||c.push(n));return c}}),(function(t,e,n){var i=n(19);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}}),(function(t,e){}),(function(t,e,n){"use strict";var i=n(25),r=n(3),o=n(51),s=n(8),a=n(9),u=n(14),c=n(75),l=n(26),d=n(77),f=n(1)("iterator"),p=!([].keys&&"next"in[].keys()),h=function(){return this};t.exports=function(t,e,n,v,m,g,b){c(n,e,v);var y,A,x,_=function(t){if(!p&&t in I)return I[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},w=e+" Iterator",S="values"==m,M=!1,I=t.prototype,C=I[f]||I["@@iterator"]||m&&I[m],T=C||_(m),k=m?S?_("entries"):T:void 0,P="Array"==e?I.entries||C:C;if(P&&(x=d(P.call(new t)))!==Object.prototype&&x.next&&(l(x,w,!0),i||a(x,f)||s(x,f,h)),S&&C&&"values"!==C.name&&(M=!0,T=function(){return C.call(this)}),i&&!b||!p&&!M&&I[f]||s(I,f,T),u[e]=T,u[w]=h,m)if(y={values:S?T:_("values"),keys:g?T:_("keys"),entries:k},b)for(A in y)A in I||o(I,A,y[A]);else r(r.P+r.F*(p||M),e,y);return y}}),(function(t,e,n){t.exports=n(8)}),(function(t,e,n){var i=n(5),r=n(76),o=n(35),s=n(33)("IE_PROTO"),a=function(){},u=function(){var t,e=n(28)("iframe"),i=o.length;for(e.style.display="none",n(53).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;i--;)delete u.prototype[o[i]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(a.prototype=i(t),n=new a,a.prototype=null,n[s]=t):n=u(),void 0===e?n:r(n,e)}}),(function(t,e,n){var i=n(2).document;t.exports=i&&i.documentElement}),(function(t,e,n){var i=n(5);t.exports=function(t,e,n,r){try{return r?e(i(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&i(o.call(t)),e}}}),(function(t,e,n){var i=n(14),r=n(1)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||o[r]===t)}}),(function(t,e,n){var i=n(5),r=n(21),o=n(1)("species");t.exports=function(t,e){var n,s=i(t).constructor;return void 0===s||void 0==(n=i(s)[o])?e:r(n)}}),(function(t,e,n){var i,r,o,s=n(16),a=n(84),u=n(53),c=n(28),l=n(2),d=l.process,f=l.setImmediate,p=l.clearImmediate,h=l.MessageChannel,v=l.Dispatch,m=0,g={},b=function(){var t=+this;if(g.hasOwnProperty(t)){var e=g[t];delete g[t],e()}},y=function(t){b.call(t.data)};f&&p||(f=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return g[++m]=function(){a("function"==typeof t?t:Function(t),e)},i(m),m},p=function(t){delete g[t]},"process"==n(19)(d)?i=function(t){d.nextTick(s(b,t,1))}:v&&v.now?i=function(t){v.now(s(b,t,1))}:h?(r=new h,o=r.port2,r.port1.onmessage=y,i=s(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(i=function(t){l.postMessage(t+"","*")},l.addEventListener("message",y,!1)):i="onreadystatechange"in c("script")?function(t){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),b.call(t)}}:function(t){setTimeout(s(b,t,1),0)}),t.exports={set:f,clear:p}}),(function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}}),(function(t,e,n){var i=n(5),r=n(10),o=n(41);t.exports=function(t,e){if(i(t),r(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}}),(function(t,e,n){var i=n(1)("iterator"),r=!1;try{var o=[7][i]();o.return=function(){r=!0},Array.from(o,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var n=!1;try{var o=[7],s=o[i]();s.next=function(){return{done:n=!0}},o[i]=function(){return s},t(o)}catch(t){}return n}}),(function(t,e,n){t.exports={default:n(96),__esModule:!0}}),(function(t,e,n){var i=n(47),r=n(35).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}}),(function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(117),o=i(r),s=n(120),a=i(s);e.default=(function(){function t(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var s,u=(0,a.default)(t);!(i=(s=u.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&u.return&&u.return()}finally{if(r)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if((0,o.default)(Object(e)))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})()}),(function(t,e,n){"use strict";e.__esModule=!0;var i=n(38),r=(function(t){return t&&t.__esModule?t:{default:t}})(i);e.default=(function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,r.default)(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}})()}),(function(t,e,n){"use strict";function i(t){n(101)}function r(t){n(102)}function o(t){n(100)}function s(t){n(99)}function a(t){n(103)}function u(t){n(95)}function c(t,e){function n(t,e,n,i){return n in e?i&&"object"===Gt()(t[n])?d()({},c(e[n],t[n],i),c(t[n],e[n],i)):"object"===Gt()(t[n])?d()({},t[n],e[n]):e[n]:t[n]}var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return T()(t).map((function(r){var o=n(t,e,r,i);return Qt()({},r,o)})).reduce((function(t,e){return d()({},t,e)}),{})}Object.defineProperty(e,"__esModule",{value:!0});var l=n(15),d=n.n(l),f=n(37),p=n.n(f),h=n(38),v=n.n(h),m=n(13),g=n.n(m),b=n(90),y=n.n(b),A=n(91),x=n.n(A),_=n(92),w=n(93),S=n.n(w),M=n(94),I=n.n(M),C=n(61),T=n.n(C),k={name:"toolbar-container",data:function(){return{shouldShowTooltip:!1,tooltipEventHandlers:{mouseenter:this.onInputButtonHoverEnter,mouseleave:this.onInputButtonHoverLeave,touchstart:this.onInputButtonHoverEnter,touchend:this.onInputButtonHoverLeave,touchcancel:this.onInputButtonHoverLeave}}},props:["toolbarTitle","toolbarColor","toolbarLogo","isUiMinimized"],computed:{toolTipMinimize:function(){return this.isUiMinimized?"maximize":"minimize"}},methods:{onInputButtonHoverEnter:function(){this.shouldShowTooltip=!0},onInputButtonHoverLeave:function(){this.shouldShowTooltip=!1},toggleMinimize:function(){this.onInputButtonHoverLeave(),this.$emit("toggleMinimizeUi")}}},P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-toolbar",{attrs:{color:t.toolbarColor,dark:"",dense:""}},[n("img",{attrs:{src:t.toolbarLogo}}),t._v(" "),n("v-toolbar-title",{staticClass:"hidden-xs-and-down"},[t._v("\n    "+t._s(t.toolbarTitle)+"\n  ")]),t._v(" "),n("v-spacer"),t._v(" "),t.$store.state.isRunningEmbedded?n("v-btn",t._g({staticClass:"min-max-toggle",attrs:{icon:""},on:{click:t.toggleMinimize}},t.tooltipEventHandlers),[n("v-icon",[t._v("\n      "+t._s(t.isUiMinimized?"arrow_drop_up":"arrow_drop_down")+"\n    ")])],1):t._e()],1)},R=[],E={render:P,staticRenderFns:R},B=E,L=n(7),O=L(k,B,!1,null,null,null),F=O.exports,j={name:"message-text",props:["message"],computed:{shouldConvertUrlToLinks:function(){return this.$store.state.config.ui.convertUrlToLinksInBotMessages},shouldStripTags:function(){return this.$store.state.config.ui.stripTagsFromBotMessages},shouldRenderAsHtml:function(){return"bot"===this.message.type&&this.shouldConvertUrlToLinks},botMessageAsHtml:function(){var t=this.stripTagsFromMessage(this.message.text);return this.botMessageWithLinks(t)}},methods:{encodeAsHtml:function(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},botMessageWithLinks:function(t){var e=this;return[{type:"web",regex:new RegExp("\\b((?:https?://\\w{1}|www\\.)(?:[\\w-.]){2,256}(?:[\\w._~:/?#@!$&()*+,;=['\\]-]){0,256})","im"),replace:function(t){var n=/^https?:\/\//.test(t)?t:"http://"+t;return'<a target="_blank" href="'+encodeURI(n)+'">'+e.encodeAsHtml(t)+"</a>"}}].reduce((function(t,n){return t.split(n.regex).reduce((function(t,i,r,o){var s="";if(r%2==0){var a=r+1===o.length?"":n.replace(o[r+1]);s=""+e.encodeAsHtml(i)+a}return t+s}),"")}),t)},stripTagsFromMessage:function(t){var e=document.implementation.createHTMLDocument("").body;return e.innerHTML=t,e.textContent||e.innerText||""}}},U=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.message.text&&"human"===t.message.type?n("div",{staticClass:"message-text"},[t._v("\n  "+t._s(t.message.text)+"\n")]):t.message.text&&t.shouldRenderAsHtml?n("div",{staticClass:"message-text",domProps:{innerHTML:t._s(t.botMessageAsHtml)}}):t.message.text&&"bot"===t.message.type?n("div",{staticClass:"message-text"},[t._v("\n  "+t._s(t.shouldStripTags?t.stripTagsFromMessage(t.message.text):t.message.text)+"\n")]):t._e()},$=[],q={render:U,staticRenderFns:$},W=q,D=n(7),N=i,z=D(j,W,!1,N,"data-v-459e28b0",null),V=z.exports,G={name:"response-card",props:["response-card"],data:function(){return{hasButtonBeenClicked:!1}},computed:{},methods:{onButtonClick:function(t){this.hasButtonBeenClicked=!0;var e={type:"human",text:t};this.$store.dispatch("postTextMessage",e)}}},H=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",[t.responseCard.title.trim()?n("v-card-title",{staticClass:"red lighten-5",attrs:{"primary-title":""}},[n("span",{staticClass:"headline"},[t._v(t._s(t.responseCard.title))])]):t._e(),t._v(" "),t.responseCard.subTitle?n("v-card-text",[n("span",[t._v(t._s(t.responseCard.subTitle))])]):t._e(),t._v(" "),t.responseCard.imageUrl?n("v-card-media",{attrs:{src:t.responseCard.imageUrl,contain:"",height:"33vh"}}):t._e(),t._v(" "),t._l(t.responseCard.buttons,(function(e,i){return n("v-card-actions",{key:i,staticClass:"button-row",attrs:{actions:""}},[e.text&&e.value?n("v-btn",{attrs:{disabled:t.hasButtonBeenClicked,default:""},nativeOn:{"~click":function(n){t.onButtonClick(e.value)}}},[t._v("\n      "+t._s(e.text)+"\n    ")]):t._e()],1)})),t._v(" "),t.responseCard.attachmentLinkUrl?n("v-card-actions",[n("v-btn",{staticClass:"red lighten-5",attrs:{flat:"",tag:"a",href:t.responseCard.attachmentLinkUrl,target:"_blank"}},[t._v("\n      Open Link\n    ")])],1):t._e()],2)},Q=[],K={render:H,staticRenderFns:Q},X=K,J=n(7),Y=r,Z=J(G,X,!1,Y,"data-v-942efe32",null),tt=Z.exports,et={name:"message",props:["message"],components:{MessageText:V,ResponseCard:tt},computed:{botDialogState:function(){if(!("dialogState"in this.message))return null;switch(this.message.dialogState){case"Failed":return{icon:"error",color:"red",state:"fail"};case"Fulfilled":case"ReadyForFulfillment":return{icon:"done",color:"green",state:"ok"};default:return null}},shouldDisplayResponseCard:function(){return this.message.responseCard&&("1"===this.message.responseCard.version||1===this.message.responseCard.version)&&"application/vnd.amazonaws.card.generic"===this.message.responseCard.contentType&&"genericAttachments"in this.message.responseCard&&this.message.responseCard.genericAttachments instanceof Array}},methods:{playAudio:function(){var t=this.$el.querySelector("audio");t&&t.play()}}},nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-flex",{staticClass:"message",attrs:{row:""}},[n("v-chip",{attrs:{"text-color":"black"}},["text"in t.message&&null!==t.message.text&&t.message.text.length?n("message-text",{attrs:{message:t.message}}):t._e(),t._v(" "),"human"===t.message.type&&t.message.audio?n("div",[n("audio",[n("source",{attrs:{src:t.message.audio,type:"audio/wav"}})]),t._v(" "),n("v-btn",{staticClass:"black--text",attrs:{left:"",icon:""},on:{click:t.playAudio}},[n("v-icon",{staticClass:"play-button"},[t._v("play_circle_outline")])],1)],1):t._e(),t._v(" "),"bot"===t.message.type&&t.botDialogState?n("v-icon",{class:"dialog-state-"+t.botDialogState.state,attrs:{medium:""}},[t._v("\n      "+t._s(t.botDialogState.icon)+"\n    ")]):t._e()],1),t._v(" "),t.shouldDisplayResponseCard?n("div",{staticClass:"response-card"},t._l(t.message.responseCard.genericAttachments,(function(t,e){return n("response-card",{key:e,attrs:{"response-card":t}})}))):t._e()],1)},it=[],rt={render:nt,staticRenderFns:it},ot=rt,st=n(7),at=o,ut=st(et,ot,!1,at,"data-v-e1d222ba",null),ct=ut.exports,lt={name:"message-list",components:{Message:ct},computed:{messages:function(){return this.$store.state.messages}},watch:{messages:function(){var t=this;this.$nextTick((function(){t.$el.scrollTop=t.$el.scrollHeight}))}}},dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{staticClass:"message-list ma-0",attrs:{column:""}},t._l(t.messages,(function(t){return n("message",{key:t.id,class:"message-"+t.type,attrs:{message:t}})})))},ft=[],pt={render:dt,staticRenderFns:ft},ht=pt,vt=n(7),mt=s,gt=vt(lt,ht,!1,mt,"data-v-586f2038",null),bt=gt.exports,yt={name:"recorder-status",data:function(){return{volume:0,volumeIntervalId:null,audioPlayPercent:0,audioIntervalId:null}},computed:{isSpeechConversationGoing:function(){return this.isConversationGoing},isProcessing:function(){return this.isSpeechConversationGoing&&!this.isRecording&&!this.isBotSpeaking},statusText:function(){return this.isInterrupting?"Interrupting...":this.canInterruptBotPlayback?'Say "skip" and I\'ll listen for your answer...':this.isMicMuted?"Microphone seems to be muted...":this.isRecording?"Listening...":this.isBotSpeaking?"Playing audio...":this.isSpeechConversationGoing?"Processing...":this.isRecorderSupported?"Click on the mic":""},canInterruptBotPlayback:function(){return this.$store.state.botAudio.canInterrupt},isBotSpeaking:function(){return this.$store.state.botAudio.isSpeaking},isConversationGoing:function(){return this.$store.state.recState.isConversationGoing},isInterrupting:function(){return this.$store.state.recState.isInterrupting||this.$store.state.botAudio.isInterrupting},isMicMuted:function(){return this.$store.state.recState.isMicMuted},isRecorderSupported:function(){return this.$store.state.recState.isRecorderSupported},isRecording:function(){return this.$store.state.recState.isRecording}},methods:{enterMeter:function(){var t=this;this.volumeIntervalId=setInterval((function(){t.$store.dispatch("getRecorderVolume").then((function(e){t.volume=e.instant.toFixed(4)}))}),50)},leaveMeter:function(){this.volumeIntervalId&&clearInterval(this.volumeIntervalId)},enterAudioPlay:function(){var t=this;this.audioIntervalId=setInterval((function(){t.$store.dispatch("getAudioProperties").then((function(e){var n=e.end,i=void 0===n?0:n,r=e.duration,o=void 0===r?0:r,s=o<=0?0:i/o*100;t.audioPlayPercent=10*Math.ceil(s/10)+5}))}),20)},leaveAudioPlay:function(){this.audioIntervalId&&(this.audioPlayPercent=0,clearInterval(this.audioIntervalId))}}},At=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-flex",{staticClass:"recorder-status white"},[n("div",{staticClass:"status-text"},[n("span",[t._v(t._s(t.statusText))])]),t._v(" "),n("div",{staticClass:"voice-controls ml-2"},[n("transition",{attrs:{css:!1},on:{enter:t.enterMeter,leave:t.leaveMeter}},[t.isRecording?n("div",{staticClass:"volume-meter"},[n("meter",{attrs:{value:t.volume,min:"0.0001",low:"0.005",optimum:"0.04",high:"0.07",max:"0.09"}})]):t._e()]),t._v(" "),t.isProcessing?n("v-progress-linear",{staticClass:"processing-bar ma-0",attrs:{indeterminate:!0}}):t._e(),t._v(" "),n("transition",{attrs:{css:!1},on:{enter:t.enterAudioPlay,leave:t.leaveAudioPlay}},[t.isBotSpeaking?n("v-progress-linear",{staticClass:"audio-progress-bar ma-0",model:{value:t.audioPlayPercent,callback:function(e){t.audioPlayPercent=e},expression:"audioPlayPercent"}}):t._e()],1)],1)])},xt=[],_t={render:At,staticRenderFns:xt},wt=_t,St=n(7),Mt=a,It=St(yt,wt,!1,Mt,"data-v-5167cc48",null),Ct=It.exports,Tt={name:"input-container",data:function(){return{textInput:"",isTextFieldFocused:!1,shouldShowTooltip:!1,tooltipEventHandlers:{mouseenter:this.onInputButtonHoverEnter,mouseleave:this.onInputButtonHoverLeave,touchstart:this.onInputButtonHoverEnter,touchend:this.onInputButtonHoverLeave,touchcancel:this.onInputButtonHoverLeave}}},props:["textInputPlaceholder","initialSpeechInstruction"],components:{RecorderStatus:Ct},computed:{isBotSpeaking:function(){return this.$store.state.botAudio.isSpeaking},isSpeechConversationGoing:function(){return this.$store.state.recState.isConversationGoing},isMicButtonDisabled:function(){return this.isMicMuted},isMicMuted:function(){return this.$store.state.recState.isMicMuted},isRecorderSupported:function(){return this.$store.state.recState.isRecorderSupported},isRecorderEnabled:function(){return this.$store.state.recState.isRecorderEnabled},isSendButtonDisabled:function(){return this.textInput.length<1},micButtonIcon:function(){return this.isMicMuted?"mic_off":this.isBotSpeaking||this.isSpeechConversationGoing?"stop":"mic"},inputButtonTooltip:function(){return this.shouldShowSendButton?"send":this.isMicMuted?"mic seems to be muted":this.isBotSpeaking||this.isSpeechConversationGoing?"interrupt":"click to use voice"},shouldShowSendButton:function(){return this.textInput.length&&this.isTextFieldFocused||!this.isRecorderSupported||!this.isRecorderEnabled},shouldShowTextInput:function(){return!(this.isBotSpeaking||this.isSpeechConversationGoing)}},methods:{onInputButtonHoverEnter:function(){this.shouldShowTooltip=!0},onInputButtonHoverLeave:function(){this.shouldShowTooltip=!1},onMicClick:function(){return this.onInputButtonHoverLeave(),this.isBotSpeaking||this.isSpeechConversationGoing?this.$store.dispatch("interruptSpeechConversation"):this.isSpeechConversationGoing?g.a.resolve():this.startSpeechConversation()},onTextFieldFocus:function(){this.isTextFieldFocused=!0},onTextFieldBlur:function(){!this.textInput.length&&this.isTextFieldFocused&&(this.isTextFieldFocused=!1)},playInitialInstruction:function(){var t=this;return["","Fulfilled","Failed"].some((function(e){return t.$store.state.lex.dialogState===e}))?this.$store.dispatch("pollySynthesizeSpeech",this.initialSpeechInstruction):g.a.resolve()},postTextMessage:function(){var t=this;if(this.onInputButtonHoverLeave(),this.textInput=this.textInput.trim(),!this.textInput.length)return g.a.resolve();var e={type:"human",text:this.textInput};return this.$store.dispatch("postTextMessage",e).then((function(){t.textInput=""}))},startSpeechConversation:function(){var t=this;return this.isMicMuted?g.a.resolve():this.setAutoPlay().then((function(){return t.playInitialInstruction()})).then((function(){return t.$store.dispatch("startConversation")})).catch((function(e){var n=t.$store.state.config.ui.showErrorDetails?" "+e:"";t.$store.dispatch("pushErrorMessage","Sorry, I couldn't start the conversation. Please try again."+n)}))},setAutoPlay:function(){return this.$store.state.botAudio.autoPlay?g.a.resolve():this.$store.dispatch("setAudioAutoPlay")}}},kt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-footer",[n("v-layout",{staticClass:"input-container",attrs:{row:"","justify-space-between":"","ma-0":""}},[n("v-toolbar",{attrs:{color:"white"}},[n("v-text-field",{directives:[{name:"show",rawName:"v-show",value:t.shouldShowTextInput,expression:"shouldShowTextInput"}],attrs:{label:t.textInputPlaceholder,id:"text-input",name:"text-input","single-line":"","hide-details":""},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;e.stopPropagation(),t.postTextMessage(e)},focus:t.onTextFieldFocus,blur:t.onTextFieldBlur},model:{value:t.textInput,callback:function(e){t.textInput=e},expression:"textInput"}}),t._v(" "),n("recorder-status",{directives:[{name:"show",rawName:"v-show",value:!t.shouldShowTextInput,expression:"!shouldShowTextInput"}]}),t._v(" "),n("v-tooltip",{ref:"tooltip",attrs:{activator:".input-button",left:""},model:{value:t.shouldShowTooltip,callback:function(e){t.shouldShowTooltip=e},expression:"shouldShowTooltip"}},[n("span",{attrs:{id:"input-button-tooltip"}},[t._v(t._s(t.inputButtonTooltip))])]),t._v(" "),t.shouldShowSendButton?n("v-btn",t._g({ref:"send",staticClass:"black--text input-button",attrs:{disabled:t.isSendButtonDisabled,icon:""},on:{click:t.postTextMessage}},t.tooltipEventHandlers),[n("v-icon",{attrs:{medium:""}},[t._v("send")])],1):n("v-btn",t._g({ref:"mic",staticClass:"black--text input-button",attrs:{disabled:t.isMicButtonDisabled,icon:""},on:{click:t.onMicClick}},t.tooltipEventHandlers),[n("v-icon",{attrs:{medium:""}},[t._v(t._s(t.micButtonIcon))])],1)],1)],1)],1)},Pt=[],Rt={render:kt,staticRenderFns:Pt},Et=Rt,Bt=n(7),Lt=Bt(Tt,Et,!1,null,null,null),Ot=Lt.exports,Ft={name:"lex-web",components:{ToolbarContainer:F,MessageList:bt,InputContainer:Ot},computed:{initialSpeechInstruction:function(){return this.$store.state.config.lex.initialSpeechInstruction},textInputPlaceholder:function(){return this.$store.state.config.ui.textInputPlaceholder},toolbarColor:function(){return this.$store.state.config.ui.toolbarColor},toolbarTitle:function(){return this.$store.state.config.ui.toolbarTitle},toolbarLogo:function(){return this.$store.state.config.ui.toolbarLogo},isUiMinimized:function(){return this.$store.state.isUiMinimized},lexState:function(){return this.$store.state.lex}},watch:{lexState:function(){this.$emit("updateLexState",this.lexState)}},beforeMount:function(){"true"!==this.$store.state.config.urlQueryParams.lexWebUiEmbed?(this.$store.commit("setIsRunningEmbedded",!1),this.$store.commit("setAwsCredsProvider","cognito")):(document.referrer.startsWith(this.$store.state.config.ui.parentOrigin),window.addEventListener("message",this.messageHandler,!1),this.$store.commit("setIsRunningEmbedded",!0),this.$store.commit("setAwsCredsProvider","parentWindow"))},mounted:function(){var t=this;this.$store.dispatch("initConfig",this.$lexWebUi.config).then((function(){return t.$store.dispatch("getConfigFromParent")})).then((function(e){return T()(e).length?t.$store.dispatch("initConfig",e):g.a.resolve()})).then((function(){return g.a.all([t.$store.dispatch("initCredentials",t.$lexWebUi.awsConfig.credentials),t.$store.dispatch("initRecorder"),t.$store.dispatch("initBotAudio",window.Audio?new Audio:null)])})).then((function(){return g.a.all([t.$store.dispatch("initMessageList"),t.$store.dispatch("initPollyClient",t.$lexWebUi.pollyClient),t.$store.dispatch("initLexClient",t.$lexWebUi.lexRuntimeClient)])})).then((function(){return t.$store.state.isRunningEmbedded?t.$store.dispatch("sendMessageToParentWindow",{event:"ready"}):g.a.resolve()})).then((function(){})).catch((function(t){}))},methods:{toggleMinimizeUi:function(){return this.$store.dispatch("toggleIsUiMinimized")},messageHandler:function(t){if(t.origin===this.$store.state.config.ui.parentOrigin&&t.ports)switch(t.data.event){case"ping":case"parentReady":t.ports[0].postMessage({event:"resolve",type:t.data.event});break;case"toggleMinimizeUi":this.$store.dispatch("toggleIsUiMinimized").then((function(){return t.ports[0].postMessage({event:"resolve",type:t.data.event})}));break;case"postText":if(!t.data.message)return void t.ports[0].postMessage({event:"reject",type:t.data.event,error:"missing message field"});this.$store.dispatch("postTextMessage",{type:"human",text:t.data.message}).then((function(){return t.ports[0].postMessage({event:"resolve",type:t.data.event})}))}}}},jt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{attrs:{id:"lex-web"}},[n("toolbar-container",{attrs:{"toolbar-title":t.toolbarTitle,"toolbar-color":t.toolbarColor,"toolbar-logo":t.toolbarLogo,"is-ui-minimized":t.isUiMinimized},on:{toggleMinimizeUi:t.toggleMinimizeUi}}),t._v(" "),n("message-list",{directives:[{name:"show",rawName:"v-show",value:!t.isUiMinimized,expression:"!isUiMinimized"}]}),t._v(" "),t.isUiMinimized?t._e():n("input-container",{attrs:{"text-input-placeholder":t.textInputPlaceholder,"initial-speech-instruction":t.initialSpeechInstruction}})],1)},Ut=[],$t={render:jt,staticRenderFns:Ut},qt=$t,Wt=n(7),Dt=u,Nt=Wt(Ft,qt,!1,Dt,null,null),zt=Nt.exports,Vt=n(42),Gt=n.n(Vt),Ht=n(116),Qt=n.n(Ht),Kt=n(63),Xt=n.n(Kt),Jt=["dev","prod","test"].find((function(t){return"production".startsWith(t)})),Yt=n(123)("./config."+Jt+".json"),Zt={region:"us-east-1",cognito:{poolId:""},lex:{botName:"WebUiOrderFlowers",botAlias:"$LATEST",initialText:"Hello",initialSpeechInstruction:'Say "Innobot" to get started',sessionAttributes:{},reInitSessionAttributesOnRestart:!0,enablePlaybackInterrupt:!1,playbackInterruptVolumeThreshold:-60,playbackInterruptLevelThreshold:.0075,playbackInterruptNoiseThreshold:-75,playbackInterruptMinDuration:2},polly:{voiceId:"Joanna"},ui:{pageTitle:"Innobot",parentOrigin:null,textInputPlaceholder:"Type here or click on the mic",toolbarColor:"gray",toolbarTitle:"Innobot",toolbarLogo:"",favIcon:"",pushInitialTextOnRestart:!1,reInitSessionAttributesOnRestart:!1,convertUrlToLinksInBotMessages:!0,stripTagsFromBotMessages:!0,showErrorDetails:!0},recorder:{enable:!0,recordingTimeMax:10,recordingTimeMin:2.5,quietThreshold:.002,quietTimeMin:.3,volumeThreshold:-65,useAutoMuteDetect:!1,useBandPass:!1,encoderUseTrim:!1},converser:{silentConsecutiveRecordingMax:3},urlQueryParams:{}},te=c(Zt,Yt),ee=(function(t){try{return t.split("?",2).slice(1,2).reduce((function(t,e){return e.split("&")}),[]).map((function(t){return t.split("=")})).reduce((function(t,e){var n=Xt()(e,2),i=n[0],r=n[1],o=void 0===r||r,s=Qt()({},i,decodeURIComponent(o));return d()({},t,s)}),{})}catch(t){return{}}})(window.location.href),ne=(function(t){try{return t.lexWebUiConfig?JSON.parse(t.lexWebUiConfig):{}}catch(t){return{}}})(ee);ne.ui&&ne.ui.parentOrigin&&delete ne.ui.parentOrigin;var ie=c(te,ne),re=d()({},ie,{urlQueryParams:ee}),oe={version:"0.11.0",lex:{acceptFormat:"audio/ogg",dialogState:"",isInterrupting:!1,isProcessing:!1,inputTranscript:"",intentName:"",message:"",responseCard:null,sessionAttributes:re.lex&&re.lex.sessionAttributes&&"object"===Gt()(re.lex.sessionAttributes)?d()({},re.lex.sessionAttributes):{},slotToElicit:"",slots:{}},messages:[],polly:{outputFormat:"ogg_vorbis",voiceId:re.polly&&re.polly.voiceId&&"string"==typeof re.polly.voiceId?""+re.polly.voiceId:"Joanna"},botAudio:{canInterrupt:!1,interruptIntervalId:null,autoPlay:!1,isInterrupting:!1,isSpeaking:!1},recState:{isConversationGoing:!1,isInterrupting:!1,isMicMuted:!1,isMicQuiet:!0,isRecorderSupported:!1,isRecorderEnabled:!re.recorder||!!re.recorder.enable,isRecording:!1,silentRecordingCount:0},isRunningEmbedded:!1,isUiMinimized:!1,config:re,awsCreds:{provider:"cognito"}},se={canInterruptBotPlayback:function(t){return t.botAudio.canInterrupt},isBotSpeaking:function(t){return t.botAudio.isSpeaking},isConversationGoing:function(t){return t.recState.isConversationGoing},isLexInterrupting:function(t){return t.lex.isInterrupting},isLexProcessing:function(t){return t.lex.isProcessing},isMicMuted:function(t){return t.recState.isMicMuted},isMicQuiet:function(t){return t.recState.isMicQuiet},isRecorderSupported:function(t){return t.recState.isRecorderSupported},isRecording:function(t){return t.recState.isRecording}},ae={setIsMicMuted:function(t,e){"boolean"==typeof e&&t.config.recorder.useAutoMuteDetect&&(t.recState.isMicMuted=e)},setIsMicQuiet:function(t,e){"boolean"==typeof e&&(t.recState.isMicQuiet=e)},setIsConversationGoing:function(t,e){"boolean"==typeof e&&(t.recState.isConversationGoing=e)},startRecording:function(t,e){!1===t.recState.isRecording&&(e.start(),t.recState.isRecording=!0)},stopRecording:function(t,e){!0===t.recState.isRecording&&(t.recState.isRecording=!1,e.isRecording&&e.stop())},increaseSilentRecordingCount:function(t){t.recState.silentRecordingCount+=1},resetSilentRecordingCount:function(t){t.recState.silentRecordingCount=0},setIsRecorderEnabled:function(t,e){"boolean"==typeof e&&(t.recState.isRecorderEnabled=e)},setIsRecorderSupported:function(t,e){"boolean"==typeof e&&(t.recState.isRecorderSupported=e)},setIsBotSpeaking:function(t,e){"boolean"==typeof e&&(t.botAudio.isSpeaking=e)},setAudioAutoPlay:function(t,e){var n=e.audio,i=e.status;"boolean"==typeof i&&(t.botAudio.autoPlay=i,n.autoplay=i)},setCanInterruptBotPlayback:function(t,e){"boolean"==typeof e&&(t.botAudio.canInterrupt=e)},setIsBotPlaybackInterrupting:function(t,e){"boolean"==typeof e&&(t.botAudio.isInterrupting=e)},setBotPlaybackInterruptIntervalId:function(t,e){"number"==typeof e&&(t.botAudio.interruptIntervalId=e)},updateLexState:function(t,e){t.lex=d()({},t.lex,e)},setLexSessionAttributes:function(t,e){"object"===(void 0===e?"undefined":Gt()(e))&&(t.lex.sessionAttributes=e)},setIsLexProcessing:function(t,e){"boolean"==typeof e&&(t.lex.isProcessing=e)},setIsLexInterrupting:function(t,e){"boolean"==typeof e&&(t.lex.isInterrupting=e)},setAudioContentType:function(t,e){switch(e){case"mp3":case"mpg":case"mpeg":t.polly.outputFormat="mp3",t.lex.acceptFormat="audio/mpeg";break;case"ogg":case"ogg_vorbis":case"x-cbr-opus-with-preamble":default:t.polly.outputFormat="ogg_vorbis",t.lex.acceptFormat="audio/ogg"}},setPollyVoiceId:function(t,e){"string"==typeof e&&(t.polly.voiceId=e)},mergeConfig:function(t,e){if("object"===(void 0===e?"undefined":Gt()(e))){var n=t.config&&t.config.ui&&t.config.ui.parentOrigin?t.config.ui.parentOrigin:e.ui.parentOrigin||window.location.origin,i=d()({},e,{ui:d()({},e.ui,{parentOrigin:n})});t.config&&t.config.ui&&t.config.ui.parentOrigin&&e.ui&&e.ui.parentOrigin&&(e.ui.parentOrigin,t.config.ui.parentOrigin),t.config=c(t.config,i)}},setIsRunningEmbedded:function(t,e){"boolean"==typeof e&&(t.isRunningEmbedded=e)},toggleIsUiMinimized:function(t){t.isUiMinimized=!t.isUiMinimized},pushMessage:function(t,e){t.messages.push(d()({id:t.messages.length},e))},setAwsCredsProvider:function(t,e){t.awsCreds.provider=e}},ue=n(127),ce=n.n(ue),le=n(45),de=n.n(le),fe=n(64),pe=n.n(fe),he=n(132),ve=n.n(he),me=(function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p()(this,t),this.initOptions(n),this._eventTarget=document.createDocumentFragment(),this._encoderWorker=new ve.a,this._encoderWorker.addEventListener("message",(function(t){return e._exportWav(t.data)}))}return pe()(t,[{key:"initOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.preset&&de()(t,this._getPresetOptions(t.preset)),this.mimeType=t.mimeType||"audio/wav",this.recordingTimeMax=t.recordingTimeMax||8,this.recordingTimeMin=t.recordingTimeMin||2,this.recordingTimeMinAutoIncrease=void 0===t.recordingTimeMinAutoIncrease||!!t.recordingTimeMinAutoIncrease,this.autoStopRecording=void 0===t.autoStopRecording||!!t.autoStopRecording,this.quietThreshold=t.quietThreshold||.001,this.quietTimeMin=t.quietTimeMin||.4,this.volumeThreshold=t.volumeThreshold||-75,this.useBandPass=void 0===t.useBandPass||!!t.useBandPass,this.bandPassFrequency=t.bandPassFrequency||4e3,this.bandPassQ=t.bandPassQ||.707,this.bufferLength=t.bufferLength||2048,this.numChannels=t.numChannels||1,this.requestEchoCancellation=void 0===t.requestEchoCancellation||!!t.requestEchoCancellation,this.useAutoMuteDetect=void 0===t.useAutoMuteDetect||!!t.useAutoMuteDetect,this.muteThreshold=t.muteThreshold||1e-7,this.encoderUseTrim=void 0===t.encoderUseTrim||!!t.encoderUseTrim,this.encoderQuietTrimThreshold=t.encoderQuietTrimThreshold||8e-4,this.encoderQuietTrimSlackBack=t.encoderQuietTrimSlackBack||4e3}},{key:"_getPresetOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"low_latency";return this._presets=["low_latency","speech_recognition"],-1===this._presets.indexOf(t)?{}:{low_latency:{encoderUseTrim:!0,useBandPass:!0},speech_recognition:{encoderUseTrim:!1,useBandPass:!1,useAutoMuteDetect:!1}}[t]}},{key:"init",value:function(){var t=this;return this._state="inactive",this._instant=0,this._slow=0,this._clip=0,this._maxVolume=-1/0,this._isMicQuiet=!0,this._isMicMuted=!1,this._isSilentRecording=!0,this._silentRecordingConsecutiveCount=0,this._initAudioContext().then((function(){return t._initMicVolumeProcessor()})).then((function(){return t._initStream()}))}},{key:"start",value:function(){"inactive"===this._state&&void 0!==this._stream&&(this._state="recording",this._recordingStartTime=this._audioContext.currentTime,this._eventTarget.dispatchEvent(new Event("start")),this._encoderWorker.postMessage({command:"init",config:{sampleRate:this._audioContext.sampleRate,numChannels:this.numChannels,useTrim:this.encoderUseTrim,quietTrimThreshold:this.encoderQuietTrimThreshold,quietTrimSlackBack:this.encoderQuietTrimSlackBack}}))}},{key:"stop",value:function(){"recording"===this._state&&(this._recordingStartTime>this._quietStartTime?(this._isSilentRecording=!0,this._silentRecordingConsecutiveCount+=1,this._eventTarget.dispatchEvent(new Event("silentrecording"))):(this._isSilentRecording=!1,this._silentRecordingConsecutiveCount=0,this._eventTarget.dispatchEvent(new Event("unsilentrecording"))),this._state="inactive",this._recordingStartTime=0,this._encoderWorker.postMessage({command:"exportWav",type:"audio/wav"}),this._eventTarget.dispatchEvent(new Event("stop")))}},{key:"_exportWav",value:function(t){var e=new CustomEvent("dataavailable",{detail:t.data});this._eventTarget.dispatchEvent(e),this._encoderWorker.postMessage({command:"clear"})}},{key:"_recordBuffers",value:function(t){if("recording"===this._state){for(var e=[],n=0;n<t.numberOfChannels;n++)e[n]=t.getChannelData(n);this._encoderWorker.postMessage({command:"record",buffer:e})}}},{key:"_setIsMicMuted",value:function(){if(this.useAutoMuteDetect)return this._instant>=this.muteThreshold?void(this._isMicMuted&&(this._isMicMuted=!1,this._eventTarget.dispatchEvent(new Event("unmute")))):void(!this._isMicMuted&&this._slow<this.muteThreshold&&(this._isMicMuted=!0,this._eventTarget.dispatchEvent(new Event("mute")),"recording"===this._state&&this.stop()))}},{key:"_setIsMicQuiet",value:function(){var t=this._audioContext.currentTime,e=this._maxVolume<this.volumeThreshold||this._slow<this.quietThreshold;!this._isMicQuiet&&e&&(this._quietStartTime=this._audioContext.currentTime,this._eventTarget.dispatchEvent(new Event("quiet"))),this._isMicQuiet&&!e&&(this._quietStartTime=0,this._eventTarget.dispatchEvent(new Event("unquiet"))),this._isMicQuiet=e;var n=this.recordingTimeMinAutoIncrease?this.recordingTimeMin-1+Math.pow(this.recordingTimeMax,1-1/(this._silentRecordingConsecutiveCount+1)):this.recordingTimeMin;this.autoStopRecording&&this._isMicQuiet&&"recording"===this._state&&t-this._recordingStartTime>n&&t-this._quietStartTime>this.quietTimeMin&&this.stop()}},{key:"_initAudioContext",value:function(){var t=this;return window.AudioContext=window.AudioContext||window.webkitAudioContext,window.AudioContext?(this._audioContext=new AudioContext,document.addEventListener("visibilitychange",(function(){document.hidden?t._audioContext.suspend():t._audioContext.resume()})),g.a.resolve()):g.a.reject(new Error("Web Audio API not supported."))}},{key:"_initMicVolumeProcessor",value:function(){var t=this,e=this._audioContext.createScriptProcessor(this.bufferLength,this.numChannels,this.numChannels);return e.onaudioprocess=function(e){"recording"===t._state&&(t._recordBuffers(e.inputBuffer),t._audioContext.currentTime-t._recordingStartTime>t.recordingTimeMax&&t.stop());for(var n=e.inputBuffer.getChannelData(0),i=0,r=0,o=0;o<n.length;++o)i+=n[o]*n[o],Math.abs(n[o])>.99&&(r+=1);t._instant=Math.sqrt(i/n.length),t._slow=.95*t._slow+.05*t._instant,t._clip=n.length?r/n.length:0,t._setIsMicMuted(),t._setIsMicQuiet(),t._analyser.getFloatFrequencyData(t._analyserData),t._maxVolume=Math.max.apply(Math,ce()(t._analyserData))},this._micVolumeProcessor=e,g.a.resolve()}},{key:"_initStream",value:function(){var t=this,e={audio:{optional:[{echoCancellation:this.requestEchoCancellation}]}};return navigator.mediaDevices.getUserMedia(e).then((function(e){t._stream=e,t._tracks=e.getAudioTracks(),t._tracks[0].onmute=t._setIsMicMuted,t._tracks[0].onunmute=t._setIsMicMuted;var n=t._audioContext.createMediaStreamSource(e),i=t._audioContext.createGain(),r=t._audioContext.createAnalyser();if(t.useBandPass){var o=t._audioContext.createBiquadFilter();o.type="bandpass",o.frequency.value=t.bandPassFrequency,o.gain.Q=t.bandPassQ,n.connect(o),o.connect(i),r.smoothingTimeConstant=.5}else n.connect(i),r.smoothingTimeConstant=.9;r.fftSize=t.bufferLength,r.minDecibels=-90,r.maxDecibels=-30,i.connect(r),r.connect(t._micVolumeProcessor),t._analyserData=new Float32Array(r.frequencyBinCount),t._analyser=r,t._micVolumeProcessor.connect(t._audioContext.destination),t._eventTarget.dispatchEvent(new Event("streamReady"))}))}},{key:"state",get:function(){return this._state}},{key:"stream",get:function(){return this._stream}},{key:"isMicQuiet",get:function(){return this._isMicQuiet}},{key:"isMicMuted",get:function(){return this._isMicMuted}},{key:"isSilentRecording",get:function(){return this._isSilentRecording}},{key:"isRecording",get:function(){return"recording"===this._state}},{key:"volume",get:function(){return{instant:this._instant,slow:this._slow,clip:this._clip,max:this._maxVolume}}},{key:"onstart",set:function(t){this._eventTarget.addEventListener("start",t)}},{key:"onstop",set:function(t){this._eventTarget.addEventListener("stop",t)}},{key:"ondataavailable",set:function(t){this._eventTarget.addEventListener("dataavailable",t)}},{key:"onerror",set:function(t){this._eventTarget.addEventListener("error",t)}},{key:"onstreamready",set:function(t){this._eventTarget.addEventListener("streamready",t)}},{key:"onmute",set:function(t){this._eventTarget.addEventListener("mute",t)}},{key:"onunmute",set:function(t){this._eventTarget.addEventListener("unmute",t)}},{key:"onsilentrecording",set:function(t){this._eventTarget.addEventListener("silentrecording",t)}},{key:"onunsilentrecording",set:function(t){this._eventTarget.addEventListener("unsilentrecording",t)}},{key:"onquiet",set:function(t){this._eventTarget.addEventListener("quiet",t)}},{key:"onunquiet",set:function(t){this._eventTarget.addEventListener("unquiet",t)}}]),t})(),ge=me,be=function(t,e){e.onstart=function(){},e.onstop=function(){t.dispatch("stopRecording")},e.onsilentrecording=function(){t.commit("increaseSilentRecordingCount")},e.onunsilentrecording=function(){t.state.recState.silentRecordingCount>0&&t.commit("resetSilentRecordingCount")},e.onerror=function(t){},e.onstreamready=function(){},e.onmute=function(){t.commit("setIsMicMuted",!0)},e.onunmute=function(){t.commit("setIsMicMuted",!1)},e.onquiet=function(){t.commit("setIsMicQuiet",!0)},e.onunquiet=function(){t.commit("setIsMicQuiet",!1)},e.ondataavailable=function(n){var i=e.mimeType,r=new Blob([n.detail],{type:i}),o=0;i.startsWith("audio/ogg")&&(o=125+n.detail[125]+1),t.dispatch("lexPostContent",r,o).then((function(e){if(t.state.recState.silentRecordingCount>=t.state.config.converser.silentConsecutiveRecordingMax){var n="Too many consecutive silent recordings: "+t.state.recState.silentRecordingCount+".";return g.a.reject(new Error(n))}return g.a.all([t.dispatch("getAudioUrl",r),t.dispatch("getAudioUrl",e)])})).then((function(e){if("Fulfilled"!==t.state.lex.dialogState&&!t.state.recState.isConversationGoing)return g.a.resolve();var n=Xt()(e,2),i=n[0],r=n[1];return t.dispatch("pushMessage",{type:"human",audio:i,text:t.state.lex.inputTranscript}),t.dispatch("pushMessage",{type:"bot",audio:r,text:t.state.lex.message,dialogState:t.state.lex.dialogState,responseCard:t.state.lex.responseCard}),t.dispatch("playAudio",r,{},o)})).then((function(){return["Fulfilled","ReadyForFulfillment","Failed"].indexOf(t.state.lex.dialogState)>=0?t.dispatch("stopConversation").then((function(){return t.dispatch("reInitBot")})):t.state.recState.isConversationGoing?t.dispatch("startRecording"):g.a.resolve()})).catch((function(e){var n=t.state.config.ui.showErrorDetails?" "+e:"";t.dispatch("stopConversation"),t.dispatch("pushErrorMessage","Sorry, I had an error handling this conversation."+n),t.commit("resetSilentRecordingCount")}))}},ye=be,Ae=n(134),xe=n.n(Ae),_e=n(135),we=n.n(_e),Se=(function(){function t(e){var n=e.botName,i=e.botAlias,r=void 0===i?"$LATEST":i,o=e.userId,s=e.lexRuntimeClient;if(p()(this,t),!n||!s)throw new Error("invalid lex client constructor arguments");this.botName=n,this.botAlias=r,this.userId=o||"lex-web-ui-"+Math.floor(65536*(1+Math.random())).toString(16).substring(1),this.lexRuntimeClient=s,this.credentials=this.lexRuntimeClient.config.credentials}return pe()(t,[{key:"initCredentials",value:function(t){this.credentials=t,this.lexRuntimeClient.config.credentials=this.credentials,this.userId=t.identityId?t.identityId:this.userId}},{key:"postText",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.lexRuntimeClient.postText({botAlias:this.botAlias,botName:this.botName,userId:this.userId,inputText:t,sessionAttributes:n});return this.credentials.getPromise().then((function(t){return t&&e.initCredentials(t)})).then((function(){return i.promise()}))}},{key:"postContent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"audio/ogg",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=t.type,s=o;o.startsWith("audio/wav")?s="audio/x-l16; sample-rate=16000; channel-count=1":o.startsWith("audio/ogg")&&(s="audio/x-cbr-opus-with-preamble; bit-rate=32000; frame-size-milliseconds=20; preamble-size="+r);var a=this.lexRuntimeClient.postContent({accept:i,botAlias:this.botAlias,botName:this.botName,userId:this.userId,contentType:s,inputStream:t,sessionAttributes:e});return this.credentials.getPromise().then((function(t){return t&&n.initCredentials(t)})).then((function(){return a.promise()}))}}]),t})(),Me=Se,Ie=void 0,Ce=void 0,Te=void 0,ke=void 0,Pe=void 0,Re={initCredentials:function(t,e){switch(t.state.awsCreds.provider){case"cognito":return Ie=e,t.dispatch("getCredentials");case"parentWindow":return t.dispatch("getCredentials");default:return g.a.reject(new Error("unknown credential provider"))}},getConfigFromParent:function(t){return t.state.isRunningEmbedded?t.dispatch("sendMessageToParentWindow",{event:"initIframeConfig"}).then((function(t){return"resolve"===t.event&&"initIframeConfig"===t.type?g.a.resolve(t.data):g.a.reject(new Error("invalid config event from parent"))})):g.a.resolve({})},initConfig:function(t,e){t.commit("mergeConfig",e)},initMessageList:function(t){t.commit("pushMessage",{type:"bot",text:t.state.config.lex.initialText})},initLexClient:function(t,e){return Te=new Me({botName:t.state.config.lex.botName,botAlias:t.state.config.lex.botAlias,lexRuntimeClient:e}),t.commit("setLexSessionAttributes",t.state.config.lex.sessionAttributes),t.dispatch("getCredentials").then((function(){return Te.initCredentials(Ie)}))},initPollyClient:function(t,e){return t.state.recState.isRecorderEnabled?(Ce=e,t.commit("setPollyVoiceId",t.state.config.polly.voiceId),t.dispatch("getCredentials").then((function(t){Ce.config.credentials=t}))):g.a.resolve()},initRecorder:function(t){return t.state.config.recorder.enable?(Pe=new ge(t.state.config.recorder),Pe.init().then((function(){return Pe.initOptions(t.state.config.recorder)})).then((function(){return ye(t,Pe)})).then((function(){return t.commit("setIsRecorderSupported",!0)})).then((function(){return t.commit("setIsMicMuted",Pe.isMicMuted)})).catch((function(e){["PermissionDeniedError","NotAllowedError"].indexOf(e.name)>=0&&t.dispatch("pushErrorMessage","It seems like the microphone access has been denied. If you want to use voice, please allow mic usage in your browser.")}))):(t.commit("setIsRecorderEnabled",!1),g.a.resolve())},initBotAudio:function(t,e){if(!t.state.recState.isRecorderEnabled||!t.state.config.recorder.enable)return g.a.resolve();if(!e)return g.a.reject(new Error("invalid audio element"));ke=e;var n=void 0;return""!==ke.canPlayType("audio/ogg")?(t.commit("setAudioContentType","ogg"),n=xe.a):""!==ke.canPlayType("audio/mp3")&&(t.commit("setAudioContentType","mp3"),n=we.a),ke.preload="auto",ke.src=n,ke.autoplay=!1,g.a.resolve()},reInitBot:function(t){return g.a.resolve().then((function(){return t.state.config.ui.pushInitialTextOnRestart?t.dispatch("pushMessage",{text:t.state.config.lex.initialText,type:"bot"}):g.a.resolve()})).then((function(){return t.state.config.lex.reInitSessionAttributesOnRestart?t.commit("setLexSessionAttributes",t.state.config.lex.sessionAttributes):g.a.resolve()}))},getAudioUrl:function(t,e){var n=void 0;try{n=URL.createObjectURL(e)}catch(t){var i="There was an error processing the audio response: ("+t+")",r=new Error(i);return g.a.reject(r)}return g.a.resolve(n)},setAudioAutoPlay:function(t){return ke.autoplay?g.a.resolve():new g.a(function(e,n){ke.play(),ke.onended=function(){t.commit("setAudioAutoPlay",{audio:ke,status:!0}),e()},ke.onerror=function(e){t.commit("setAudioAutoPlay",{audio:ke,status:!1}),n(new Error("setting audio autoplay failed: "+e))}})},playAudio:function(t,e){return new g.a(function(n){ke.onloadedmetadata=function(){t.commit("setIsBotSpeaking",!0),t.dispatch("playAudioHandler").then((function(){return n()}))},ke.src=e})},playAudioHandler:function(t){return new g.a(function(e,n){var i=t.state.config.lex.enablePlaybackInterrupt,r=function(){t.commit("setIsBotSpeaking",!1);var e=t.state.botAudio.interruptIntervalId;e&&i&&(clearInterval(e),t.commit("setBotPlaybackInterruptIntervalId",0),t.commit("setIsLexInterrupting",!1),t.commit("setCanInterruptBotPlayback",!1),t.commit("setIsBotPlaybackInterrupting",!1))};ke.onerror=function(t){r(),n(new Error("There was an error playing the response ("+t+")"))},ke.onended=function(){r(),e()},ke.onpause=ke.onended,i&&t.dispatch("playAudioInterruptHandler")})},playAudioInterruptHandler:function(t){var e=t.state.botAudio.isSpeaking,n=t.state.config.lex,i=n.enablePlaybackInterrupt,r=n.playbackInterruptMinDuration,o=n.playbackInterruptVolumeThreshold,s=n.playbackInterruptLevelThreshold,a=n.playbackInterruptNoiseThreshold;if(i||e||!t.state.lex.isInterrupting||!(ke.duration<r)){var u=setInterval((function(){var e=ke,n=e.duration,i=ke.played.end(0),c=t.state.botAudio.canInterrupt;!c&&i>r&&n-i>.5&&Pe.volume.max<a?t.commit("setCanInterruptBotPlayback",!0):c&&n-i<.5&&t.commit("setCanInterruptBotPlayback",!1),c&&Pe.volume.max>o&&Pe.volume.slow>s&&(clearInterval(u),t.commit("setIsBotPlaybackInterrupting",!0),setTimeout((function(){ke.pause()}),500))}),200);t.commit("setBotPlaybackInterruptIntervalId",u)}},getAudioProperties:function(){return ke?{currentTime:ke.currentTime,duration:ke.duration,end:ke.played.length>=1?ke.played.end(0):ke.duration,ended:ke.ended,paused:ke.paused}:{}},startConversation:function(t){return t.commit("setIsConversationGoing",!0),t.dispatch("startRecording")},stopConversation:function(t){t.commit("setIsConversationGoing",!1)},startRecording:function(t){return!0===t.state.recState.isMicMuted?(t.dispatch("stopConversation"),g.a.reject(new Error("The microphone seems to be muted."))):(t.commit("startRecording",Pe),g.a.resolve())},stopRecording:function(t){t.commit("stopRecording",Pe)},getRecorderVolume:function(t){return t.state.recState.isRecorderEnabled?Pe.volume:g.a.resolve()},pollyGetBlob:function(t,e){var n=Ce.synthesizeSpeech({Text:e,VoiceId:t.state.polly.voiceId,OutputFormat:t.state.polly.outputFormat});return t.dispatch("getCredentials").then((function(){return n.promise()})).then((function(t){var e=new Blob([t.AudioStream],{type:t.ContentType});return g.a.resolve(e)}))},pollySynthesizeSpeech:function(t,e){return t.dispatch("pollyGetBlob",e).then((function(e){return t.dispatch("getAudioUrl",e)})).then((function(e){return t.dispatch("playAudio",e)}))},interruptSpeechConversation:function(t){return t.state.recState.isConversationGoing||t.state.botAudio.isSpeaking?new g.a(function(e,n){t.dispatch("stopConversation").then((function(){return t.dispatch("stopRecording")})).then((function(){t.state.botAudio.isSpeaking&&ke.pause()})).then((function(){var i=0;t.commit("setIsLexInterrupting",!0);var r=setInterval((function(){t.state.lex.isProcessing||(clearInterval(r),t.commit("setIsLexInterrupting",!1),e()),i>20&&(clearInterval(r),t.commit("setIsLexInterrupting",!1),n(new Error("interrupt interval exceeded"))),i+=1}),250)}))}):g.a.resolve()},postTextMessage:function(t,e){return t.dispatch("interruptSpeechConversation").then((function(){return t.dispatch("pushMessage",e)})).then((function(){return t.dispatch("lexPostText",e.text)})).then((function(e){return t.dispatch("pushMessage",{text:e.message,type:"bot",dialogState:t.state.lex.dialogState,responseCard:t.state.lex.responseCard})})).then((function(){"Fulfilled"===t.state.lex.dialogState&&t.dispatch("reInitBot")})).catch((function(e){var n=t.state.config.ui.showErrorDetails?" "+e:"";t.dispatch("pushErrorMessage","Sorry, I was unable to process your message. Try again later."+n)}))},lexPostText:function(t,e){return t.commit("setIsLexProcessing",!0),t.dispatch("getCredentials").then((function(){return Te.postText(e,t.state.lex.sessionAttributes)})).then((function(e){return t.commit("setIsLexProcessing",!1),t.dispatch("updateLexState",e).then((function(){return g.a.resolve(e)}))}))},lexPostContent:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t.commit("setIsLexProcessing",!0);var i=void 0;return t.dispatch("getCredentials").then((function(){return i=performance.now(),Te.postContent(e,t.state.lex.sessionAttributes,t.state.lex.acceptFormat,n)})).then((function(e){performance.now();return t.commit("setIsLexProcessing",!1),t.dispatch("updateLexState",e).then((function(){return t.dispatch("processLexContentResponse",e)})).then((function(t){return g.a.resolve(t)}))}))},processLexContentResponse:function(t,e){var n=e.audioStream,i=e.contentType,r=e.dialogState;return g.a.resolve().then((function(){if(!n||!n.length){var e="ReadyForFulfillment"===r?"All done":"There was an error";return t.dispatch("pollyGetBlob",e)}return g.a.resolve(new Blob([n],{type:i}))}))},updateLexState:function(t,e){var n={dialogState:"",inputTranscript:"",intentName:"",message:"",responseCard:null,sessionAttributes:{},slotToElicit:"",slots:{}};if("sessionAttributes"in e&&"appContext"in e.sessionAttributes)try{var i=JSON.parse(e.sessionAttributes.appContext);"responseCard"in i&&(n.responseCard=i.responseCard)}catch(t){var r=new Error("error parsing appContext in sessionAttributes: "+t);return g.a.reject(r)}return t.commit("updateLexState",d()({},n,e)),t.state.isRunningEmbedded&&t.dispatch("sendMessageToParentWindow",{event:"updateLexState",state:t.state.lex}),g.a.resolve()},pushMessage:function(t,e){t.commit("pushMessage",e)},pushErrorMessage:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Failed";t.commit("pushMessage",{type:"bot",text:e,dialogState:n})},getCredentialsFromParent:function(t){var e=Ie&&Ie.expireTime?Ie.expireTime:0;return new Date(e)>Date.now()?g.a.resolve(Ie):t.dispatch("sendMessageToParentWindow",{event:"getCredentials"}).then((function(t){if("resolve"===t.event&&"getCredentials"===t.type)return g.a.resolve(t.data);var e=new Error("invalid credential event from parent");return g.a.reject(e)})).then((function(t){var e=t.data.Credentials,n=e.AccessKeyId,i=e.SecretKey,r=e.SessionToken,o=t.data.IdentityId;return Ie={accessKeyId:n,secretAccessKey:i,sessionToken:r,identityId:o,expired:!1,getPromise:function(){return g.a.resolve(Ie)}}}))},getCredentials:function(t){return"parentWindow"===t.state.awsCreds.provider?t.dispatch("getCredentialsFromParent"):Ie.getPromise().then((function(){return Ie}))},toggleIsUiMinimized:function(t){return t.commit("toggleIsUiMinimized"),t.dispatch("sendMessageToParentWindow",{event:"toggleMinimizeUi"})},sendMessageToParentWindow:function(t,e){if(!t.state.isRunningEmbedded){var n="sendMessage called when not running embedded";return g.a.reject(n)}return new g.a(function(n,i){var r=new MessageChannel;r.port1.onmessage=function(t){if(r.port1.close(),r.port2.close(),"resolve"===t.data.event)n(t.data);else{var e="error in sendMessageToParentWindow: "+t.data.error;i(new Error(e))}},window.parent.postMessage(e,t.state.config.ui.parentOrigin,[r.port2])})}},Ee={strict:!1,state:oe,getters:se,mutations:ae,actions:Re};n.d(e,"Plugin",(function(){return je})),n.d(e,"Store",(function(){return Ue})),n.d(e,"Loader",(function(){return $e}));var Be={name:"lex-web-ui",template:'<lex-web v-on="$listeners"></lex-web>',components:{LexWeb:zt}},Le={template:"<p>Loading. Please wait...</p>"},Oe={template:"<p>An error ocurred...</p>"},Fe=function(t){var e=t.component,n=void 0===e?g.a.resolve(Be):e,i=t.loading,r=void 0===i?Le:i,o=t.error,s=void 0===o?Oe:o,a=t.delay,u=void 0===a?200:a,c=t.timeout;return{component:n,loading:r,error:s,delay:u,timeout:void 0===c?1e4:c}},je={install:function(t,e){var n=e.name,i=void 0===n?"$lexWebUi":n,r=e.componentName,o=void 0===r?"lex-web-ui":r,s=e.awsConfig,a=e.lexRuntimeClient,u=e.pollyClient,c=e.component,l=void 0===c?Fe:c,d=e.config,f=void 0===d?re:d,p={config:f,awsConfig:s,lexRuntimeClient:a,pollyClient:u};v()(t.prototype,i,{value:p}),t.component(o,l)}},Ue=Ee,$e=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p()(this,t);var n=c(re,e),i=window.Vue?window.Vue:y.a;if(!i)throw new Error("unable to find Vue");var r=window.Vuex?window.Vuex:x.a;if(!r)throw new Error("unable to find Vuex");var o=window.AWS&&window.AWS.Config?window.AWS.Config:_.Config,s=window.AWS&&window.AWS.CognitoIdentityCredentials?window.AWS.CognitoIdentityCredentials:_.CognitoIdentityCredentials,a=window.AWS&&window.AWS.Polly?window.AWS.Polly:I.a,u=window.AWS&&window.AWS.LexRuntime?window.AWS.LexRuntime:S.a;if(!(o&&s&&a&&u))throw new Error("unable to find AWS SDK");var l=new s({IdentityPoolId:n.cognito.poolId},{region:n.region||"us-east-1"}),f=new o({region:n.region||"us-east-1",credentials:l}),h=new u(f),v=void 0===n.recorder||n.recorder&&!1!==n.recorder.enable?new a(f):null;this.store=new r.Store(d()({},Ee)),i.use(je,{config:n,awsConfig:f,lexRuntimeClient:h,pollyClient:v})}}),(function(t,e,n){n(67),t.exports=n(0).Object.assign}),(function(t,e,n){var i=n(3);i(i.S+i.F,"Object",{assign:n(68)})}),(function(t,e,n){"use strict";var i=n(18),r=n(36),o=n(23),s=n(24),a=n(48),u=Object.assign;t.exports=!u||n(11)((function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach((function(t){e[t]=t})),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=i}))?function(t,e){for(var n=s(t),u=arguments.length,c=1,l=r.f,d=o.f;u>c;)for(var f,p=a(arguments[c++]),h=l?i(p).concat(l(p)):i(p),v=h.length,m=0;v>m;)d.call(p,f=h[m++])&&(n[f]=p[f]);return n}:u}),(function(t,e,n){var i=n(12),r=n(31),o=n(70);t.exports=function(t){return function(e,n,s){var a,u=i(e),c=r(u.length),l=o(s,c);if(t&&n!=n){for(;c>l;)if((a=u[l++])!=a)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}}}),(function(t,e,n){var i=n(32),r=Math.max,o=Math.min;t.exports=function(t,e){return t=i(t),t<0?r(t+e,0):o(t,e)}}),(function(t,e,n){n(72);var i=n(0).Object;t.exports=function(t,e,n){return i.defineProperty(t,e,n)}}),(function(t,e,n){var i=n(3);i(i.S+i.F*!n(6),"Object",{defineProperty:n(4).f})}),(function(t,e,n){n(49),n(20),n(27),n(81),n(88),n(89),t.exports=n(0).Promise}),(function(t,e,n){var i=n(32),r=n(30);t.exports=function(t){return function(e,n){var o,s,a=String(r(e)),u=i(n),c=a.length;return u<0||u>=c?t?"":void 0:(o=a.charCodeAt(u),o<55296||o>56319||u+1===c||(s=a.charCodeAt(u+1))<56320||s>57343?t?a.charAt(u):o:t?a.slice(u,u+2):s-56320+(o-55296<<10)+65536)}}}),(function(t,e,n){"use strict";var i=n(52),r=n(17),o=n(26),s={};n(8)(s,n(1)("iterator"),(function(){return this})),t.exports=function(t,e,n){t.prototype=i(s,{next:r(1,n)}),o(t,e+" Iterator")}}),(function(t,e,n){var i=n(4),r=n(5),o=n(18);t.exports=n(6)?Object.defineProperties:function(t,e){r(t);for(var n,s=o(e),a=s.length,u=0;a>u;)i.f(t,n=s[u++],e[n]);return t}}),(function(t,e,n){var i=n(9),r=n(24),o=n(33)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),i(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}}),(function(t,e,n){"use strict";var i=n(79),r=n(80),o=n(14),s=n(12);t.exports=n(50)(Array,"Array",(function(t,e){this._t=s(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,r(1)):"keys"==e?r(0,n):"values"==e?r(0,t[n]):r(0,[n,t[n]])}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")}),(function(t,e){t.exports=function(){}}),(function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}}),(function(t,e,n){"use strict";var i,r,o,s,a=n(25),u=n(2),c=n(16),l=n(39),d=n(3),f=n(10),p=n(21),h=n(82),v=n(83),m=n(56),g=n(57).set,b=n(85)(),y=n(41),A=n(58),x=n(59),_=u.TypeError,w=u.process,S=u.Promise,M="process"==l(w),I=function(){},C=r=y.f,T=!!(function(){try{var t=S.resolve(1),e=(t.constructor={})[n(1)("species")]=function(t){t(I,I)};return(M||"function"==typeof PromiseRejectionEvent)&&t.then(I)instanceof e}catch(t){}})(),k=function(t){var e;return!(!f(t)||"function"!=typeof(e=t.then))&&e},P=function(t,e){if(!t._n){t._n=!0;var n=t._c;b((function(){for(var i=t._v,r=1==t._s,o=0;n.length>o;)!(function(e){var n,o,s=r?e.ok:e.fail,a=e.resolve,u=e.reject,c=e.domain;try{s?(r||(2==t._h&&B(t),t._h=1),!0===s?n=i:(c&&c.enter(),n=s(i),c&&c.exit()),n===e.promise?u(_("Promise-chain cycle")):(o=k(n))?o.call(n,a,u):a(n)):u(i)}catch(t){u(t)}})(n[o++]);t._c=[],t._n=!1,e&&!t._h&&R(t)}))}},R=function(t){g.call(u,(function(){var e,n,i,r=t._v,o=E(t);if(o&&(e=A((function(){M?w.emit("unhandledRejection",r,t):(n=u.onunhandledrejection)?n({promise:t,reason:r}):(i=u.console)&&i.error&&i.error("Unhandled promise rejection",r)})),t._h=M||E(t)?2:1),t._a=void 0,o&&e.e)throw e.v}))},E=function(t){if(1==t._h)return!1;for(var e,n=t._a||t._c,i=0;n.length>i;)if(e=n[i++],e.fail||!E(e.promise))return!1;return!0},B=function(t){g.call(u,(function(){var e;M?w.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})}))},L=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),P(e,!0))},O=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw _("Promise can't be resolved itself");(e=k(t))?b((function(){var i={_w:n,_d:!1};try{e.call(t,c(O,i,1),c(L,i,1))}catch(t){L.call(i,t)}})):(n._v=t,n._s=1,P(n,!1))}catch(t){L.call({_w:n,_d:!1},t)}}};T||(S=function(t){h(this,S,"Promise","_h"),p(t),i.call(this);try{t(c(O,this,1),c(L,this,1))}catch(t){L.call(this,t)}},i=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},i.prototype=n(86)(S.prototype,{then:function(t,e){var n=C(m(this,S));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=M?w.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&P(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new i;this.promise=t,this.resolve=c(O,t,1),this.reject=c(L,t,1)},y.f=C=function(t){return t===S||t===s?new o(t):r(t)}),d(d.G+d.W+d.F*!T,{Promise:S}),n(26)(S,"Promise"),n(87)("Promise"),s=n(0).Promise,d(d.S+d.F*!T,"Promise",{reject:function(t){var e=C(this);return(0,e.reject)(t),e.promise}}),d(d.S+d.F*(a||!T),"Promise",{resolve:function(t){return x(a&&this===s?S:this,t)}}),d(d.S+d.F*!(T&&n(60)((function(t){S.all(t).catch(I)}))),"Promise",{all:function(t){var e=this,n=C(e),i=n.resolve,r=n.reject,o=A((function(){var n=[],o=0,s=1;v(t,!1,(function(t){var a=o++,u=!1;n.push(void 0),s++,e.resolve(t).then((function(t){u||(u=!0,n[a]=t,--s||i(n))}),r)})),--s||i(n)}));return o.e&&r(o.v),n.promise},race:function(t){var e=this,n=C(e),i=n.reject,r=A((function(){v(t,!1,(function(t){e.resolve(t).then(n.resolve,i)}))}));return r.e&&i(r.v),n.promise}})}),(function(t,e){t.exports=function(t,e,n,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(n+": incorrect invocation!");return t}}),(function(t,e,n){var i=n(16),r=n(54),o=n(55),s=n(5),a=n(31),u=n(40),c={},l={},e=t.exports=function(t,e,n,d,f){var p,h,v,m,g=f?function(){return t}:u(t),b=i(n,d,e?2:1),y=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(o(g)){for(p=a(t.length);p>y;y++)if((m=e?b(s(h=t[y])[0],h[1]):b(t[y]))===c||m===l)return m}else for(v=g.call(t);!(h=v.next()).done;)if((m=r(v,b,h.value,e))===c||m===l)return m};e.BREAK=c,e.RETURN=l}),(function(t,e){t.exports=function(t,e,n){var i=void 0===n;switch(e.length){case 0:return i?t():t.call(n);case 1:return i?t(e[0]):t.call(n,e[0]);case 2:return i?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}}),(function(t,e,n){var i=n(2),r=n(57).set,o=i.MutationObserver||i.WebKitMutationObserver,s=i.process,a=i.Promise,u="process"==n(19)(s);t.exports=function(){var t,e,n,c=function(){var i,r;for(u&&(i=s.domain)&&i.exit();t;){r=t.fn,t=t.next;try{r()}catch(i){throw t?n():e=void 0,i}}e=void 0,i&&i.enter()};if(u)n=function(){s.nextTick(c)};else if(o){var l=!0,d=document.createTextNode("");new o(c).observe(d,{characterData:!0}),n=function(){d.data=l=!l}}else if(a&&a.resolve){var f=a.resolve();n=function(){f.then(c)}}else n=function(){r.call(i,c)};return function(i){var r={fn:i,next:void 0};e&&(e.next=r),t||(t=r,n()),e=r}}}),(function(t,e,n){var i=n(8);t.exports=function(t,e,n){for(var r in e)n&&t[r]?t[r]=e[r]:i(t,r,e[r]);return t}}),(function(t,e,n){"use strict";var i=n(2),r=n(0),o=n(4),s=n(6),a=n(1)("species");t.exports=function(t){var e="function"==typeof r[t]?r[t]:i[t];s&&e&&!e[a]&&o.f(e,a,{configurable:!0,get:function(){return this}})}}),(function(t,e,n){"use strict";var i=n(3),r=n(0),o=n(2),s=n(56),a=n(59);i(i.P+i.R,"Promise",{finally:function(t){var e=s(this,r.Promise||o.Promise),n="function"==typeof t;return this.then(n?function(n){return a(e,t()).then((function(){return n}))}:t,n?function(n){return a(e,t()).then((function(){throw n}))}:t)}})}),(function(t,e,n){"use strict";var i=n(3),r=n(41),o=n(58);i(i.S,"Promise",{try:function(t){var e=r.f(this),n=o(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})}),(function(e,n){e.exports=t}),(function(t,n){t.exports=e}),(function(t,e){t.exports=n}),(function(t,e){t.exports=i}),(function(t,e){t.exports=r}),(function(t,e){}),(function(t,e,n){n(97),t.exports=n(0).Object.keys}),(function(t,e,n){var i=n(24),r=n(18);n(98)("keys",(function(){return function(t){return r(i(t))}}))}),(function(t,e,n){var i=n(3),r=n(0),o=n(11);t.exports=function(t,e){var n=(r.Object||{})[t]||Object[t],s={};s[t]=e(n),i(i.S+i.F*o((function(){n(1)})),"Object",s)}}),(function(t,e){}),(function(t,e){}),(function(t,e){}),(function(t,e){}),(function(t,e){}),(function(t,e,n){t.exports={default:n(105),__esModule:!0}}),(function(t,e,n){n(20),n(27),t.exports=n(43).f("iterator")}),(function(t,e,n){t.exports={default:n(107),__esModule:!0}}),(function(t,e,n){n(108),n(49),n(114),n(115),t.exports=n(0).Symbol}),(function(t,e,n){"use strict";var i=n(2),r=n(9),o=n(6),s=n(3),a=n(51),u=n(109).KEY,c=n(11),l=n(34),d=n(26),f=n(22),p=n(1),h=n(43),v=n(44),m=n(110),g=n(111),b=n(5),y=n(12),A=n(29),x=n(17),_=n(52),w=n(112),S=n(113),M=n(4),I=n(18),C=S.f,T=M.f,k=w.f,P=i.Symbol,R=i.JSON,E=R&&R.stringify,B=p("_hidden"),L=p("toPrimitive"),O={}.propertyIsEnumerable,F=l("symbol-registry"),j=l("symbols"),U=l("op-symbols"),$=Object.prototype,q="function"==typeof P,W=i.QObject,D=!W||!W.prototype||!W.prototype.findChild,N=o&&c((function(){return 7!=_(T({},"a",{get:function(){return T(this,"a",{value:7}).a}})).a}))?function(t,e,n){var i=C($,e);i&&delete $[e],T(t,e,n),i&&t!==$&&T($,e,i)}:T,z=function(t){var e=j[t]=_(P.prototype);return e._k=t,e},V=q&&"symbol"==typeof P.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof P},G=function(t,e,n){return t===$&&G(U,e,n),b(t),e=A(e,!0),b(n),r(j,e)?(n.enumerable?(r(t,B)&&t[B][e]&&(t[B][e]=!1),n=_(n,{enumerable:x(0,!1)})):(r(t,B)||T(t,B,x(1,{})),t[B][e]=!0),N(t,e,n)):T(t,e,n)},H=function(t,e){b(t);for(var n,i=m(e=y(e)),r=0,o=i.length;o>r;)G(t,n=i[r++],e[n]);return t},Q=function(t,e){return void 0===e?_(t):H(_(t),e)},K=function(t){var e=O.call(this,t=A(t,!0));return!(this===$&&r(j,t)&&!r(U,t))&&(!(e||!r(this,t)||!r(j,t)||r(this,B)&&this[B][t])||e)},X=function(t,e){if(t=y(t),e=A(e,!0),t!==$||!r(j,e)||r(U,e)){var n=C(t,e);return!n||!r(j,e)||r(t,B)&&t[B][e]||(n.enumerable=!0),n}},J=function(t){for(var e,n=k(y(t)),i=[],o=0;n.length>o;)r(j,e=n[o++])||e==B||e==u||i.push(e);return i},Y=function(t){for(var e,n=t===$,i=k(n?U:y(t)),o=[],s=0;i.length>s;)!r(j,e=i[s++])||n&&!r($,e)||o.push(j[e]);return o};q||(P=function(){if(this instanceof P)throw TypeError("Symbol is not a constructor!");var t=f(arguments.length>0?arguments[0]:void 0),e=function(n){this===$&&e.call(U,n),r(this,B)&&r(this[B],t)&&(this[B][t]=!1),N(this,t,x(1,n))};return o&&D&&N($,t,{configurable:!0,set:e}),z(t)},a(P.prototype,"toString",(function(){return this._k})),S.f=X,M.f=G,n(62).f=w.f=J,n(23).f=K,n(36).f=Y,o&&!n(25)&&a($,"propertyIsEnumerable",K,!0),h.f=function(t){return z(p(t))}),s(s.G+s.W+s.F*!q,{Symbol:P});for(var Z="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;Z.length>tt;)p(Z[tt++]);for(var et=I(p.store),nt=0;et.length>nt;)v(et[nt++]);s(s.S+s.F*!q,"Symbol",{for:function(t){return r(F,t+="")?F[t]:F[t]=P(t)},keyFor:function(t){if(!V(t))throw TypeError(t+" is not a symbol!");for(var e in F)if(F[e]===t)return e},useSetter:function(){D=!0},useSimple:function(){D=!1}}),s(s.S+s.F*!q,"Object",{create:Q,defineProperty:G,defineProperties:H,getOwnPropertyDescriptor:X,getOwnPropertyNames:J,getOwnPropertySymbols:Y}),R&&s(s.S+s.F*(!q||c((function(){var t=P();return"[null]"!=E([t])||"{}"!=E({a:t})||"{}"!=E(Object(t))}))),"JSON",{stringify:function(t){if(void 0!==t&&!V(t)){for(var e,n,i=[t],r=1;arguments.length>r;)i.push(arguments[r++]);return e=i[1],"function"==typeof e&&(n=e),!n&&g(e)||(e=function(t,e){if(n&&(e=n.call(this,t,e)),!V(e))return e}),i[1]=e,E.apply(R,i)}}}),P.prototype[L]||n(8)(P.prototype,L,P.prototype.valueOf),d(P,"Symbol"),d(Math,"Math",!0),d(i.JSON,"JSON",!0)}),(function(t,e,n){var i=n(22)("meta"),r=n(10),o=n(9),s=n(4).f,a=0,u=Object.isExtensible||function(){return!0},c=!n(11)((function(){return u(Object.preventExtensions({}))})),l=function(t){s(t,i,{value:{i:"O"+ ++a,w:{}}})},d=function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,i)){if(!u(t))return"F";if(!e)return"E";l(t)}return t[i].i},f=function(t,e){if(!o(t,i)){if(!u(t))return!0;if(!e)return!1;l(t)}return t[i].w},p=function(t){return c&&h.NEED&&u(t)&&!o(t,i)&&l(t),t},h=t.exports={KEY:i,NEED:!1,fastKey:d,getWeak:f,onFreeze:p}}),(function(t,e,n){var i=n(18),r=n(36),o=n(23);t.exports=function(t){var e=i(t),n=r.f;if(n)for(var s,a=n(t),u=o.f,c=0;a.length>c;)u.call(t,s=a[c++])&&e.push(s);return e}}),(function(t,e,n){var i=n(19);t.exports=Array.isArray||function(t){return"Array"==i(t)}}),(function(t,e,n){var i=n(12),r=n(62).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(t){try{return r(t)}catch(t){return s.slice()}};t.exports.f=function(t){return s&&"[object Window]"==o.call(t)?a(t):r(i(t))}}),(function(t,e,n){var i=n(23),r=n(17),o=n(12),s=n(29),a=n(9),u=n(46),c=Object.getOwnPropertyDescriptor;e.f=n(6)?c:function(t,e){if(t=o(t),e=s(e,!0),u)try{return c(t,e)}catch(t){}if(a(t,e))return r(!i.f.call(t,e),t[e])}}),(function(t,e,n){n(44)("asyncIterator")}),(function(t,e,n){n(44)("observable")}),(function(t,e,n){"use strict";e.__esModule=!0;var i=n(38),r=(function(t){return t&&t.__esModule?t:{default:t}})(i);e.default=function(t,e,n){return e in t?(0,r.default)(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}}),(function(t,e,n){t.exports={default:n(118),__esModule:!0}}),(function(t,e,n){n(27),n(20),t.exports=n(119)}),(function(t,e,n){var i=n(39),r=n(1)("iterator"),o=n(14);t.exports=n(0).isIterable=function(t){var e=Object(t);return void 0!==e[r]||"@@iterator"in e||o.hasOwnProperty(i(e))}}),(function(t,e,n){t.exports={default:n(121),__esModule:!0}}),(function(t,e,n){n(27),n(20),t.exports=n(122)}),(function(t,e,n){var i=n(5),r=n(40);t.exports=n(0).getIterator=function(t){var e=r(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return i(e.call(t))}}),(function(t,e,n){function i(t){return n(r(t))}function r(t){var e=o[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var o={"./config.dev.json":124,"./config.prod.json":125,"./config.test.json":126};i.keys=function(){return Object.keys(o)},i.resolve=r,t.exports=i,i.id=123}),(function(t,e){t.exports={cognito:{poolId:""},lex:{botName:"WebUiOrderFlowers",initialText:"Hello",initialSpeechInstruction:"Say 'Innobot' to get started."},polly:{voiceId:"Salli"},ui:{parentOrigin:"http://localhost:8080",pageTitle:"Innobot",toolbarTitle:"Chat"},recorder:{preset:"speech_recognition"}}}),(function(t,e){t.exports={cognito:{poolId:""},lex:{botName:"WebUiOrderFlowers",initialText:"Hello",initialSpeechInstruction:"Say 'Innobot' to get started."},polly:{voiceId:"Salli"},ui:{parentOrigin:"",pageTitle:"Innobot",toolbarTitle:"Innobot"},recorder:{preset:"speech_recognition"}}}),(function(t,e){t.exports={cognito:{poolId:""},lex:{botName:"WebUiOrderFlowers",initialText:"Hello",initialSpeechInstruction:"Say 'Innobot' to get started."},polly:{voiceId:"Salli"},ui:{parentOrigin:"http://localhost:8080",pageTitle:"Innobot",toolbarTitle:"Innobot"},recorder:{preset:"speech_recognition"}}}),(function(t,e,n){"use strict";e.__esModule=!0;var i=n(128),r=(function(t){return t&&t.__esModule?t:{default:t}})(i);e.default=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return(0,r.default)(t)}}),(function(t,e,n){t.exports={default:n(129),__esModule:!0}}),(function(t,e,n){n(20),n(130),t.exports=n(0).Array.from}),(function(t,e,n){"use strict";var i=n(16),r=n(3),o=n(24),s=n(54),a=n(55),u=n(31),c=n(131),l=n(40);r(r.S+r.F*!n(60)((function(t){Array.from(t)})),"Array",{from:function(t){var e,n,r,d,f=o(t),p="function"==typeof this?this:Array,h=arguments.length,v=h>1?arguments[1]:void 0,m=void 0!==v,g=0,b=l(f);if(m&&(v=i(v,h>2?arguments[2]:void 0,2)),void 0==b||p==Array&&a(b))for(e=u(f.length),n=new p(e);e>g;g++)c(n,g,m?v(f[g],g):f[g]);else for(d=b.call(f),n=new p;!(r=d.next()).done;g++)c(n,g,m?s(d,v,[r.value,g],!0):r.value);return n.length=g,n}})}),(function(t,e,n){"use strict";var i=n(4),r=n(17);t.exports=function(t,e,n){e in t?i.f(t,e,r(0,n)):t[e]=n}}),(function(t,e,n){t.exports=function(){return n(133)("/*!\n* lex-web-ui v\"0.11.0\"\n* (c) 2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n* Released under the Amazon Software License.\n*/   \n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ ((function(module, exports) {\n\n// based on https://github.com/mattdiamond/Recorderjs/blob/master/src/recorder.js\n// with a few optimizations including downsampling and trimming quiet samples\n\n/* global Blob self */\n/* eslint no-restricted-globals: off */\n/* eslint prefer-arrow-callback: [\"error\", { \"allowNamedFunctions\": true }] */\n/* eslint no-param-reassign: [\"error\", { \"props\": false }] */\n/* eslint no-use-before-define: [\"error\", { \"functions\": false }] */\n/* eslint no-plusplus: off */\n/* eslint comma-dangle: [\"error\", {\"functions\": \"never\", \"objects\": \"always-multiline\"}] */\n/* eslint-disable prefer-destructuring */\nconst bitDepth = 16;\nconst bytesPerSample = bitDepth / 8;\nconst outSampleRate = 16000;\nconst outNumChannels = 1;\n\nlet recLength = 0;\nlet recBuffers = [];\n\nconst options = {\n  sampleRate: 44000,\n  numChannels: 1,\n  useDownsample: true,\n  // controls if the encoder will trim silent samples at begining and end of buffer\n  useTrim: true,\n  // trim samples below this value at the beginnig and end of the buffer\n  // lower the value trim less silence (larger file size)\n  // reasonable values seem to be between 0.005 and 0.0005\n  quietTrimThreshold: 0.0008,\n  // how many samples to add back to the buffer before/after the quiet threshold\n  // higher values result in less silence trimming (larger file size)\n  // reasonable values seem to be between 3500 and 5000\n  quietTrimSlackBack: 4000,\n};\n\nself.onmessage = (evt) => {\n  switch (evt.data.command) {\n    case 'init':\n      init(evt.data.config);\n      break;\n    case 'record':\n      record(evt.data.buffer);\n      break;\n    case 'exportWav':\n      exportWAV(evt.data.type);\n      break;\n    case 'getBuffer':\n      getBuffer();\n      break;\n    case 'clear':\n      clear();\n      break;\n    case 'close':\n      self.close();\n      break;\n    default:\n      break;\n  }\n};\n\nfunction init(config) {\n  Object.assign(options, config);\n  initBuffers();\n}\n\nfunction record(inputBuffer) {\n  for (let channel = 0; channel < options.numChannels; channel++) {\n    recBuffers[channel].push(inputBuffer[channel]);\n  }\n  recLength += inputBuffer[0].length;\n}\n\nfunction exportWAV(type) {\n  const buffers = [];\n  for (let channel = 0; channel < options.numChannels; channel++) {\n    buffers.push(mergeBuffers(recBuffers[channel], recLength));\n  }\n  let interleaved;\n  if (options.numChannels === 2 && outNumChannels === 2) {\n    interleaved = interleave(buffers[0], buffers[1]);\n  } else {\n    interleaved = buffers[0];\n  }\n  const downsampledBuffer = downsampleTrimBuffer(interleaved, outSampleRate);\n  const dataview = encodeWAV(downsampledBuffer);\n  const audioBlob = new Blob([dataview], { type });\n\n  self.postMessage({\n    command: 'exportWAV',\n    data: audioBlob,\n  });\n}\n\nfunction getBuffer() {\n  const buffers = [];\n  for (let channel = 0; channel < options.numChannels; channel++) {\n    buffers.push(mergeBuffers(recBuffers[channel], recLength));\n  }\n  self.postMessage({ command: 'getBuffer', data: buffers });\n}\n\nfunction clear() {\n  recLength = 0;\n  recBuffers = [];\n  initBuffers();\n}\n\nfunction initBuffers() {\n  for (let channel = 0; channel < options.numChannels; channel++) {\n    recBuffers[channel] = [];\n  }\n}\n\nfunction mergeBuffers(recBuffer, length) {\n  const result = new Float32Array(length);\n  let offset = 0;\n  for (let i = 0; i < recBuffer.length; i++) {\n    result.set(recBuffer[i], offset);\n    offset += recBuffer[i].length;\n  }\n  return result;\n}\n\nfunction interleave(inputL, inputR) {\n  const length = inputL.length + inputR.length;\n  const result = new Float32Array(length);\n\n  let index = 0;\n  let inputIndex = 0;\n\n  while (index < length) {\n    result[index++] = inputL[inputIndex];\n    result[index++] = inputR[inputIndex];\n    inputIndex++;\n  }\n  return result;\n}\n\nfunction floatTo16BitPCM(output, offset, input) {\n  for (let i = 0, o = offset; i < input.length; i++, o += 2) {\n    const s = Math.max(-1, Math.min(1, input[i]));\n    output.setInt16(o, s < 0 ? s * 0x8000 : s * 0x7FFF, true);\n  }\n}\n\n// Lex doesn't require proper wav header\n// still inserting wav header for playing on client side\nfunction addHeader(view, length) {\n  // RIFF identifier 'RIFF'\n  view.setUint32(0, 1380533830, false);\n  // file length minus RIFF identifier length and file description length\n  view.setUint32(4, 36 + length, true);\n  // RIFF type 'WAVE'\n  view.setUint32(8, 1463899717, false);\n  // format chunk identifier 'fmt '\n  view.setUint32(12, 1718449184, false);\n  // format chunk length\n  view.setUint32(16, 16, true);\n  // sample format (raw)\n  view.setUint16(20, 1, true);\n  // channel count\n  view.setUint16(22, outNumChannels, true);\n  // sample rate\n  view.setUint32(24, outSampleRate, true);\n  // byte rate (sample rate * block align)\n  view.setUint32(28, outSampleRate * bytesPerSample * outNumChannels, true);\n  // block align (channel count * bytes per sample)\n  view.setUint16(32, bytesPerSample * outNumChannels, true);\n  // bits per sample\n  view.setUint16(34, bitDepth, true);\n  // data chunk identifier 'data'\n  view.setUint32(36, 1684108385, false);\n}\n\nfunction encodeWAV(samples) {\n  const buffer = new ArrayBuffer(44 + (samples.length * 2));\n  const view = new DataView(buffer);\n\n  addHeader(view, samples.length);\n  floatTo16BitPCM(view, 44, samples);\n\n  return view;\n}\n\nfunction downsampleTrimBuffer(buffer, rate) {\n  if (rate === options.sampleRate) {\n    return buffer;\n  }\n\n  const length = buffer.length;\n  const sampleRateRatio = options.sampleRate / rate;\n  const newLength = Math.round(length / sampleRateRatio);\n\n  const result = new Float32Array(newLength);\n  let offsetResult = 0;\n  let offsetBuffer = 0;\n  let firstNonQuiet = 0;\n  let lastNonQuiet = length;\n  while (offsetResult < result.length) {\n    const nextOffsetBuffer = Math.round((offsetResult + 1) * sampleRateRatio);\n    let accum = 0;\n    let count = 0;\n    for (let i = offsetBuffer; (i < nextOffsetBuffer) && (i < length); i++) {\n      accum += buffer[i];\n      count++;\n    }\n    // mark first and last sample over the quiet threshold\n    if (accum > options.quietTrimThreshold) {\n      if (firstNonQuiet === 0) {\n        firstNonQuiet = offsetResult;\n      }\n      lastNonQuiet = offsetResult;\n    }\n    result[offsetResult] = accum / count;\n    offsetResult++;\n    offsetBuffer = nextOffsetBuffer;\n  }\n\n  /*\n  console.info('encoder trim size reduction',\n    (Math.min(newLength, lastNonQuiet + options.quietTrimSlackBack) -\n    Math.max(0, firstNonQuiet - options.quietTrimSlackBack)) / result.length\n  );\n  */\n  return (options.useTrim) ?\n    // slice based on quiet threshold and put slack back into the buffer\n    result.slice(\n      Math.max(0, firstNonQuiet - options.quietTrimSlackBack),\n      Math.min(newLength, lastNonQuiet + options.quietTrimSlackBack)\n    ) :\n    result;\n}\n\n\n/***/ }))\n/******/ ]);",n.p+"bundle/wav-worker.min.js")}}),(function(t,e,n){"use strict";var i=window.URL||window.webkitURL;t.exports=function(t,e){try{try{var n;try{var r=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;n=new r,n.append(t),n=n.getBlob()}catch(e){n=new Blob([t])}return new Worker(i.createObjectURL(n))}catch(e){return new Worker("data:application/javascript,"+encodeURIComponent(t))}}catch(t){if(!e)throw Error("Inline worker is not supported");return new Worker(e)}}}),(function(t,e){t.exports="data:audio/ogg;base64,T2dnUwACAAAAAAAAAAAyzN3NAAAAAGFf2X8BM39GTEFDAQAAAWZMYUMAAAAiEgASAAAAAAAkFQrEQPAAAAAAAAAAAAAAAAAAAAAAAAAAAE9nZ1MAAAAAAAAAAAAAMszdzQEAAAD5LKCSATeEAAAzDQAAAExhdmY1NS40OC4xMDABAAAAGgAAAGVuY29kZXI9TGF2YzU1LjY5LjEwMCBmbGFjT2dnUwAEARIAAAAAAAAyzN3NAgAAAKWVljkCDAD/+GkIAAAdAAABICI="}),(function(t,e){t.exports="data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU2LjM2LjEwMAAAAAAAAAAAAAAA//OEAAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAAEAAABIADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV6urq6urq6urq6urq6urq6urq6urq6urq6v////////////////////////////////8AAAAATGF2YzU2LjQxAAAAAAAAAAAAAAAAJAAAAAAAAAAAASDs90hvAAAAAAAAAAAAAAAAAAAA//MUZAAAAAGkAAAAAAAAA0gAAAAATEFN//MUZAMAAAGkAAAAAAAAA0gAAAAARTMu//MUZAYAAAGkAAAAAAAAA0gAAAAAOTku//MUZAkAAAGkAAAAAAAAA0gAAAAANVVV"})])}));